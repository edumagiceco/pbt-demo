<!DOCTYPE html>
<html lang="ko">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>í† ë¡  ìƒì„¸ - PBT LMS</title>
    <style>
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }
        
        body {
            font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            min-height: 100vh;
            line-height: 1.6;
        }
        
        .navbar {
            background: rgba(255, 255, 255, 0.95);
            padding: 1rem 2rem;
            box-shadow: 0 4px 20px rgba(0, 0, 0, 0.1);
            backdrop-filter: blur(10px);
            display: flex;
            justify-content: space-between;
            align-items: center;
        }
        
        .navbar .logo {
            font-size: 1.5rem;
            font-weight: 700;
            color: #4a5568;
        }
        
        .navbar .nav-links {
            display: flex;
            gap: 1rem;
            align-items: center;
        }
        
        .navbar .nav-link {
            color: #4a5568;
            text-decoration: none;
            padding: 0.5rem 1rem;
            border-radius: 8px;
            transition: all 0.3s ease;
        }
        
        .navbar .nav-link:hover {
            background: rgba(102, 126, 234, 0.1);
            color: #667eea;
        }
        
        .navbar .logout-btn {
            padding: 0.5rem 1rem;
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            color: white;
            border: none;
            border-radius: 8px;
            cursor: pointer;
            font-weight: 500;
            transition: all 0.3s ease;
        }
        
        .container {
            max-width: 1200px;
            margin: 2rem auto;
            padding: 0 2rem;
        }
        
        .breadcrumb {
            background: rgba(255, 255, 255, 0.95);
            padding: 1rem;
            border-radius: 10px;
            margin-bottom: 2rem;
            box-shadow: 0 4px 20px rgba(0, 0, 0, 0.1);
        }
        
        .breadcrumb a {
            color: #667eea;
            text-decoration: none;
            margin-right: 0.5rem;
        }
        
        .breadcrumb a:hover {
            text-decoration: underline;
        }
        
        .discussion-main {
            background: rgba(255, 255, 255, 0.95);
            border-radius: 15px;
            padding: 2rem;
            margin-bottom: 2rem;
            box-shadow: 0 10px 30px rgba(0, 0, 0, 0.15);
        }
        
        .discussion-header {
            margin-bottom: 2rem;
            padding-bottom: 1rem;
            border-bottom: 2px solid #f7fafc;
        }
        
        .discussion-title {
            font-size: 2rem;
            font-weight: 700;
            color: #4a5568;
            margin-bottom: 1rem;
            line-height: 1.3;
        }
        
        .discussion-meta {
            display: flex;
            gap: 2rem;
            align-items: center;
            color: #718096;
            margin-bottom: 1rem;
            flex-wrap: wrap;
        }
        
        .meta-item {
            display: flex;
            align-items: center;
            gap: 0.5rem;
        }
        
        .discussion-tags {
            display: flex;
            gap: 0.5rem;
            flex-wrap: wrap;
            margin-bottom: 1rem;
        }
        
        .tag {
            padding: 0.3rem 0.8rem;
            background: rgba(102, 126, 234, 0.1);
            color: #667eea;
            border-radius: 20px;
            font-size: 0.8rem;
            font-weight: 500;
        }
        
        .discussion-status {
            display: inline-flex;
            align-items: center;
            gap: 0.5rem;
            padding: 0.5rem 1rem;
            border-radius: 25px;
            font-weight: 500;
            font-size: 0.9rem;
        }
        
        .status-solved {
            background: rgba(72, 187, 120, 0.1);
            color: #48bb78;
        }
        
        .status-active {
            background: rgba(237, 137, 54, 0.1);
            color: #ed8936;
        }
        
        .status-new {
            background: rgba(102, 126, 234, 0.1);
            color: #667eea;
        }
        
        .discussion-content {
            font-size: 1.1rem;
            line-height: 1.8;
            color: #4a5568;
            margin-bottom: 2rem;
            white-space: pre-wrap;
        }
        
        .discussion-actions {
            display: flex;
            gap: 1rem;
            align-items: center;
            padding-top: 1rem;
            border-top: 2px solid #f7fafc;
        }
        
        .action-btn {
            display: flex;
            align-items: center;
            gap: 0.5rem;
            padding: 0.7rem 1.2rem;
            border: none;
            border-radius: 8px;
            cursor: pointer;
            font-weight: 500;
            transition: all 0.3s ease;
        }
        
        .action-btn.like {
            background: rgba(72, 187, 120, 0.1);
            color: #48bb78;
        }
        
        .action-btn.like:hover {
            background: rgba(72, 187, 120, 0.2);
            transform: translateY(-1px);
        }
        
        .action-btn.reply {
            background: rgba(102, 126, 234, 0.1);
            color: #667eea;
        }
        
        .action-btn.reply:hover {
            background: rgba(102, 126, 234, 0.2);
            transform: translateY(-1px);
        }
        
        .action-btn.edit {
            background: rgba(237, 137, 54, 0.1);
            color: #ed8936;
        }
        
        .action-btn.edit:hover {
            background: rgba(237, 137, 54, 0.2);
            transform: translateY(-1px);
        }
        
        .comments-section {
            background: rgba(255, 255, 255, 0.95);
            border-radius: 15px;
            padding: 2rem;
            box-shadow: 0 10px 30px rgba(0, 0, 0, 0.15);
        }
        
        .comments-header {
            display: flex;
            justify-content: space-between;
            align-items: center;
            margin-bottom: 2rem;
            padding-bottom: 1rem;
            border-bottom: 2px solid #f7fafc;
        }
        
        .comments-title {
            font-size: 1.5rem;
            font-weight: 600;
            color: #4a5568;
        }
        
        .comment-form {
            margin-bottom: 2rem;
        }
        
        .comment-textarea {
            width: 100%;
            min-height: 100px;
            padding: 1rem;
            border: 2px solid #e2e8f0;
            border-radius: 10px;
            font-size: 1rem;
            font-family: inherit;
            resize: vertical;
            transition: border-color 0.3s ease;
        }
        
        .comment-textarea:focus {
            outline: none;
            border-color: #667eea;
        }
        
        .comment-form-actions {
            display: flex;
            justify-content: flex-end;
            gap: 1rem;
            margin-top: 1rem;
        }
        
        .btn {
            padding: 0.7rem 1.5rem;
            border: none;
            border-radius: 8px;
            cursor: pointer;
            font-weight: 500;
            transition: all 0.3s ease;
        }
        
        .btn-primary {
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            color: white;
        }
        
        .btn-primary:hover {
            transform: translateY(-1px);
            box-shadow: 0 5px 15px rgba(102, 126, 234, 0.3);
        }
        
        .btn-secondary {
            background: #e2e8f0;
            color: #4a5568;
        }
        
        .btn-secondary:hover {
            background: #cbd5e0;
        }
        
        .comment-list {
            display: flex;
            flex-direction: column;
            gap: 1.5rem;
        }
        
        .comment-item {
            padding: 1.5rem;
            background: #f7fafc;
            border-radius: 10px;
            border-left: 4px solid #667eea;
        }
        
        .comment-header {
            display: flex;
            justify-content: space-between;
            align-items: center;
            margin-bottom: 0.5rem;
        }
        
        .comment-author {
            font-weight: 600;
            color: #4a5568;
        }
        
        .comment-time {
            color: #718096;
            font-size: 0.9rem;
        }
        
        .comment-content {
            color: #4a5568;
            line-height: 1.6;
            margin-bottom: 1rem;
        }
        
        .comment-actions {
            display: flex;
            gap: 1rem;
            align-items: center;
        }
        
        .comment-action {
            background: none;
            border: none;
            color: #718096;
            cursor: pointer;
            font-size: 0.9rem;
            display: flex;
            align-items: center;
            gap: 0.3rem;
            transition: color 0.3s ease;
        }
        
        .comment-action:hover {
            color: #667eea;
        }
        
        .loading {
            text-align: center;
            padding: 3rem;
        }
        
        .spinner {
            border: 3px solid #f3f3f3;
            border-top: 3px solid #667eea;
            border-radius: 50%;
            width: 50px;
            height: 50px;
            animation: spin 1s linear infinite;
            margin: 0 auto 1rem;
        }
        
        @keyframes spin {
            0% { transform: rotate(0deg); }
            100% { transform: rotate(360deg); }
        }
        
        .empty-comments {
            text-align: center;
            padding: 3rem;
            color: #718096;
        }
        
        @media (max-width: 768px) {
            .navbar {
                padding: 1rem;
                flex-direction: column;
                gap: 1rem;
            }
            
            .container {
                padding: 0 1rem;
            }
            
            .discussion-meta {
                flex-direction: column;
                align-items: flex-start;
                gap: 0.5rem;
            }
            
            .discussion-actions {
                flex-wrap: wrap;
                gap: 0.5rem;
            }
            
            .action-btn {
                padding: 0.5rem 1rem;
                font-size: 0.9rem;
            }
            
            .comment-form-actions {
                flex-direction: column;
            }
            
            .btn {
                width: 100%;
            }
        }
    </style>
</head>
<body>
    <nav class="navbar">
        <div class="logo">ğŸ§© PBT LMS</div>
        <div class="nav-links">
            <a href="/dashboard.html" class="nav-link">ëŒ€ì‹œë³´ë“œ</a>
            <a href="/courses.html" class="nav-link">ë‚´ ê³¼ì •</a>
            <a href="/problems.html" class="nav-link">ë¬¸ì œ í’€ì´</a>
            <a href="/progress.html" class="nav-link">í•™ìŠµ ì§„ë„</a>
            <a href="/discussions.html" class="nav-link" style="background: rgba(102, 126, 234, 0.1); color: #667eea;">í† ë¡ </a>
            <button class="logout-btn" onclick="logout()">ë¡œê·¸ì•„ì›ƒ</button>
        </div>
    </nav>
    
    <div class="container">
        <div class="breadcrumb">
            <a href="/discussions.html">â† í† ë¡  ê²Œì‹œíŒ</a>
            <span>/ í† ë¡  ìƒì„¸</span>
        </div>
        
        <div id="loading" class="loading">
            <div class="spinner"></div>
            <p>í† ë¡  ë‚´ìš©ì„ ë¶ˆëŸ¬ì˜¤ëŠ” ì¤‘...</p>
        </div>
        
        <div id="discussion-content" style="display: none;">
            <div class="discussion-main">
                <div class="discussion-header">
                    <h1 id="discussion-title" class="discussion-title"></h1>
                    <div class="discussion-meta">
                        <div class="meta-item">
                            <span>ğŸ‘¤</span>
                            <span id="discussion-author"></span>
                        </div>
                        <div class="meta-item">
                            <span>ğŸ“…</span>
                            <span id="discussion-date"></span>
                        </div>
                        <div class="meta-item">
                            <span>ğŸ“‚</span>
                            <span id="discussion-category"></span>
                        </div>
                        <div class="meta-item">
                            <span>ğŸ‘ï¸</span>
                            <span id="discussion-views"></span>
                        </div>
                    </div>
                    <div id="discussion-tags" class="discussion-tags"></div>
                    <div id="discussion-status" class="discussion-status"></div>
                </div>
                
                <div id="discussion-content-text" class="discussion-content"></div>
                
                <div class="discussion-actions">
                    <button class="action-btn like" onclick="toggleLike()">
                        <span id="like-icon">ğŸ‘</span>
                        <span id="like-count">0</span>
                    </button>
                    <button class="action-btn reply" onclick="scrollToCommentForm()">
                        <span>ğŸ’¬</span>
                        <span>ëŒ“ê¸€ ì‘ì„±</span>
                    </button>
                    <button id="edit-btn" class="action-btn edit" onclick="editDiscussion()" style="display: none;">
                        <span>âœï¸</span>
                        <span>ìˆ˜ì •</span>
                    </button>
                </div>
            </div>
            
            <div class="comments-section">
                <div class="comments-header">
                    <h2 class="comments-title">ğŸ’¬ ëŒ“ê¸€ <span id="comment-count">0</span>ê°œ</h2>
                </div>
                
                <div class="comment-form">
                    <textarea id="comment-textarea" class="comment-textarea" placeholder="ëŒ“ê¸€ì„ ì‘ì„±í•´ì£¼ì„¸ìš”..."></textarea>
                    <div class="comment-form-actions">
                        <button class="btn btn-secondary" onclick="clearCommentForm()">ì·¨ì†Œ</button>
                        <button class="btn btn-primary" onclick="submitComment()">ëŒ“ê¸€ ì‘ì„±</button>
                    </div>
                </div>
                
                <div id="comment-list" class="comment-list">
                    <!-- ëŒ“ê¸€ ëª©ë¡ì´ ì—¬ê¸°ì— ë™ì ìœ¼ë¡œ ì¶”ê°€ë©ë‹ˆë‹¤ -->
                </div>
                
                <div id="empty-comments" class="empty-comments" style="display: none;">
                    <h3>ğŸ’­ ì•„ì§ ëŒ“ê¸€ì´ ì—†ìŠµë‹ˆë‹¤</h3>
                    <p>ì²« ë²ˆì§¸ ëŒ“ê¸€ì„ ì‘ì„±í•´ë³´ì„¸ìš”!</p>
                </div>
            </div>
        </div>
    </div>

    <script>
        let currentDiscussion = null;
        let currentUser = null;
        let discussionComments = [];
        
        // í˜ì´ì§€ ë¡œë“œ ì‹œ í† ë¡  ìƒì„¸ ë‚´ìš© ë¡œë“œ
        document.addEventListener('DOMContentLoaded', async () => {
            const token = localStorage.getItem('authToken');
            const userInfo = localStorage.getItem('userInfo');
            
            if (!token) {
                alert('ë¡œê·¸ì¸ì´ í•„ìš”í•©ë‹ˆë‹¤.');
                window.location.href = '/login.html';
                return;
            }
            
            if (userInfo) {
                currentUser = JSON.parse(userInfo);
            }
            
            const urlParams = new URLSearchParams(window.location.search);
            const discussionId = urlParams.get('id');
            
            if (!discussionId) {
                alert('í† ë¡  IDê°€ ì—†ìŠµë‹ˆë‹¤.');
                window.location.href = '/discussions.html';
                return;
            }
            
            await loadDiscussion(discussionId);
            await loadComments(discussionId);
        });
        
        // í† ë¡  ìƒì„¸ ë‚´ìš© ë¡œë“œ
        async function loadDiscussion(discussionId) {
            const loading = document.getElementById('loading');
            const content = document.getElementById('discussion-content');
            const token = localStorage.getItem('authToken');
            
            try {
                // ì‹¤ì œ API í˜¸ì¶œì„ ì‹œë®¬ë ˆì´ì…˜í•˜ê³  ìƒ˜í”Œ ë°ì´í„° ì‚¬ìš©
                await new Promise(resolve => setTimeout(resolve, 500)); // ë¡œë”© ì‹œë®¬ë ˆì´ì…˜
                
                // ìƒ˜í”Œ í† ë¡  ë°ì´í„°
                const sampleDiscussions = {
                    '1': {
                        id: 1,
                        title: 'JavaScript í´ë¡œì €ì— ëŒ€í•œ ì§ˆë¬¸',
                        content: `í´ë¡œì €(Closure)ëŠ” JavaScriptì˜ ì¤‘ìš”í•œ ê°œë… ì¤‘ í•˜ë‚˜ì¸ë°, ì•„ì§ ì™„ì „íˆ ì´í•´í•˜ì§€ ëª»í•˜ê² ìŠµë‹ˆë‹¤.

íŠ¹íˆ ë‹¤ìŒê³¼ ê°™ì€ ì½”ë“œì—ì„œ í´ë¡œì €ê°€ ì–´ë–»ê²Œ ì‘ë™í•˜ëŠ”ì§€ ê¶ê¸ˆí•©ë‹ˆë‹¤:

function outerFunction(x) {
    return function(y) {
        return x + y;
    };
}

const addFive = outerFunction(5);
console.log(addFive(10)); // 15

1. ë‚´ë¶€ í•¨ìˆ˜ê°€ ì–´ë–»ê²Œ ì™¸ë¶€ í•¨ìˆ˜ì˜ ë³€ìˆ˜ì— ì ‘ê·¼í•  ìˆ˜ ìˆëŠ”ê°€?
2. ì‹¤ì œ ê°œë°œì—ì„œ í´ë¡œì €ë¥¼ ì–´ë–»ê²Œ í™œìš©í•˜ë‚˜?
3. í´ë¡œì €ì™€ ê´€ë ¨ëœ ë©”ëª¨ë¦¬ ëˆ„ìˆ˜ ë¬¸ì œëŠ” ì—†ëŠ”ê°€?

ê²½í—˜ ìˆìœ¼ì‹  ë¶„ë“¤ì˜ ì¡°ì–¸ ë¶€íƒë“œë¦½ë‹ˆë‹¤!`,
                        category: 'question',
                        author: 'ì´í•™ìƒ',
                        authorId: 'student1',
                        createdAt: '2025-05-24T10:30:00Z',
                        status: 'active',
                        isPinned: false,
                        viewCount: 26, // ì¡°íšŒìˆ˜ ì¦ê°€
                        likeCount: 5,
                        tags: ['javascript', 'í´ë¡œì €', 'ê¸°ì´ˆ']
                    },
                    '2': {
                        id: 2,
                        title: '[ê³µì§€] ì•Œê³ ë¦¬ì¦˜ ìŠ¤í„°ë”” ê·¸ë£¹ ëª¨ì§‘',
                        content: `ì•ˆë…•í•˜ì„¸ìš”! ê¹€ê°•ì‚¬ì…ë‹ˆë‹¤.

ë§¤ì£¼ í™”ìš”ì¼ ì €ë… 7ì‹œì— ì•Œê³ ë¦¬ì¦˜ ë¬¸ì œë¥¼ í•¨ê»˜ í’€ ìŠ¤í„°ë”” ê·¸ë£¹ì„ ëª¨ì§‘í•©ë‹ˆë‹¤.

ğŸ“… ì¼ì •: ë§¤ì£¼ í™”ìš”ì¼ 19:00 ~ 21:00
ğŸ“ ì¥ì†Œ: ì˜¨ë¼ì¸ (Zoom)
ğŸ‘¥ ì¸ì›: ìµœëŒ€ 8ëª…
ğŸ“š ë‚´ìš©: ë°±ì¤€, í”„ë¡œê·¸ë˜ë¨¸ìŠ¤ ë¬¸ì œ í’€ì´ ë° í† ë¡ 

ì°¸ì—¬í•˜ê³  ì‹¶ìœ¼ì‹  ë¶„ì€ ëŒ“ê¸€ë¡œ ì‹ ì²­í•´ì£¼ì„¸ìš”!

#ì•Œê³ ë¦¬ì¦˜ #ìŠ¤í„°ë”” #ëª¨ì§‘`,
                        category: 'announcement',
                        author: 'ê¹€ê°•ì‚¬',
                        authorId: 'instructor1',
                        createdAt: '2025-05-23T14:00:00Z',
                        status: 'new',
                        isPinned: true,
                        viewCount: 103,
                        likeCount: 28,
                        tags: ['ì•Œê³ ë¦¬ì¦˜', 'ìŠ¤í„°ë””', 'ëª¨ì§‘']
                    }
                };
                
                // localStorageì—ì„œ ì‚¬ìš©ìê°€ ì‘ì„±í•œ í† ë¡ ë„ ë¶ˆëŸ¬ì˜¤ê¸°
                const savedDiscussions = localStorage.getItem('userDiscussions');
                if (savedDiscussions) {
                    const userDiscussions = JSON.parse(savedDiscussions);
                    Object.assign(sampleDiscussions, userDiscussions);
                }
                
                currentDiscussion = sampleDiscussions[discussionId] || sampleDiscussions['1'];
                
                // ì¡°íšŒìˆ˜ ì¦ê°€
                currentDiscussion.viewCount++;
                
                loading.style.display = 'none';
                content.style.display = 'block';
                
                renderDiscussion(currentDiscussion);
                
            } catch (error) {
                console.error('í† ë¡  ë¡œë“œ ì˜¤ë¥˜:', error);
                loading.style.display = 'none';
                alert('í† ë¡ ì„ ë¶ˆëŸ¬ì˜¤ëŠ” ì¤‘ ì˜¤ë¥˜ê°€ ë°œìƒí–ˆìŠµë‹ˆë‹¤.');
            }
        }
        
        // í† ë¡  ë‚´ìš© ë Œë”ë§
        function renderDiscussion(discussion) {
            document.getElementById('discussion-title').textContent = discussion.title;
            document.getElementById('discussion-author').textContent = discussion.author;
            document.getElementById('discussion-date').textContent = formatDate(new Date(discussion.createdAt));
            document.getElementById('discussion-category').textContent = getCategoryText(discussion.category);
            document.getElementById('discussion-views').textContent = discussion.viewCount;
            document.getElementById('discussion-content-text').textContent = discussion.content;
            document.getElementById('like-count').textContent = discussion.likeCount;
            
            // íƒœê·¸ ë Œë”ë§
            const tagsContainer = document.getElementById('discussion-tags');
            tagsContainer.innerHTML = discussion.tags.map(tag => 
                `<span class="tag">#${tag}</span>`
            ).join('');
            
            // ìƒíƒœ ë Œë”ë§
            const statusContainer = document.getElementById('discussion-status');
            const statusIcon = {
                'solved': 'âœ…',
                'active': 'ğŸ”„',
                'new': 'ğŸ†•'
            }[discussion.status] || 'ğŸ”„';
            
            const statusText = {
                'solved': 'í•´ê²°ë¨',
                'active': 'í™œì„±',
                'new': 'ìƒˆê¸€'
            }[discussion.status] || 'í™œì„±';
            
            statusContainer.innerHTML = `${statusIcon} ${statusText}`;
            statusContainer.className = `discussion-status status-${discussion.status}`;
            
            // í¸ì§‘ ë²„íŠ¼ í‘œì‹œ (ì‘ì„±ìë§Œ)
            if (currentUser && currentUser.username === discussion.authorId) {
                document.getElementById('edit-btn').style.display = 'flex';
            }
        }
        
        // ëŒ“ê¸€ ëª©ë¡ ë¡œë“œ
        async function loadComments(discussionId) {
            try {
                // ìƒ˜í”Œ ëŒ“ê¸€ ë°ì´í„°
                const sampleComments = {
                    '1': [
                        {
                            id: 1,
                            author: 'ë°•ê°œë°œ',
                            content: `í´ë¡œì €ëŠ” ì •ë§ ìœ ìš©í•œ ê°œë…ì…ë‹ˆë‹¤! ê°„ë‹¨íˆ ì„¤ëª…í•˜ìë©´:

1. ë‚´ë¶€ í•¨ìˆ˜ê°€ ì™¸ë¶€ í•¨ìˆ˜ì˜ ìŠ¤ì½”í”„ì— ì ‘ê·¼í•  ìˆ˜ ìˆëŠ” ê²ƒ
2. ì™¸ë¶€ í•¨ìˆ˜ê°€ ì¢…ë£Œë˜ì–´ë„ ë‚´ë¶€ í•¨ìˆ˜ê°€ ì™¸ë¶€ ë³€ìˆ˜ë¥¼ "ê¸°ì–µ"í•˜ëŠ” ê²ƒ

ì‹¤ì œ í™œìš© ì˜ˆì‹œ:
- ë°ì´í„° í”„ë¼ì´ë²„ì‹œ (private ë³€ìˆ˜)
- í•¨ìˆ˜ íŒ©í† ë¦¬
- ì½œë°± í•¨ìˆ˜ì—ì„œ ìƒíƒœ ìœ ì§€`,
                            createdAt: '2025-05-24T11:15:00Z',
                            likeCount: 3
                        },
                        {
                            id: 2,
                            author: 'ìµœì•Œê³ ',
                            content: 'ë©”ëª¨ë¦¬ ëˆ„ìˆ˜ ê´€ë ¨í•´ì„œëŠ” ì£¼ì˜ê°€ í•„ìš”í•©ë‹ˆë‹¤. í´ë¡œì €ê°€ ì°¸ì¡°í•˜ëŠ” ë³€ìˆ˜ë“¤ì€ ê°€ë¹„ì§€ ì»¬ë ‰ì…˜ë˜ì§€ ì•Šê¸° ë•Œë¬¸ì—, ë¶ˆí•„ìš”í•œ ì°¸ì¡°ëŠ” ì œê±°í•´ì£¼ëŠ” ê²ƒì´ ì¢‹ìŠµë‹ˆë‹¤.',
                            createdAt: '2025-05-24T12:30:00Z',
                            likeCount: 2
                        },
                        {
                            id: 3,
                            author: 'ì •ìë°”',
                            content: 'MDN ë¬¸ì„œì˜ í´ë¡œì € ì„¹ì…˜ì„ ì°¸ê³ í•˜ì‹œë©´ ë” ìì„¸í•œ ì„¤ëª…ì„ ë³¼ ìˆ˜ ìˆìŠµë‹ˆë‹¤. ì‹¤ìŠµ ì˜ˆì œë„ ë§ì´ ìˆì–´ìš”!',
                            createdAt: '2025-05-24T14:45:00Z',
                            likeCount: 1
                        }
                    ],
                    '2': [
                        {
                            id: 4,
                            author: 'ì´í•™ìƒ',
                            content: 'ìŠ¤í„°ë”” ì°¸ì—¬í•˜ê³  ì‹¶ìŠµë‹ˆë‹¤! ì–´ë–¤ ë‚œì´ë„ì˜ ë¬¸ì œë¥¼ ë‹¤ë£¨ë‚˜ìš”?',
                            createdAt: '2025-05-23T15:30:00Z',
                            likeCount: 0
                        },
                        {
                            id: 5,
                            author: 'ê¹€ì½”ë”',
                            content: 'ì €ë„ ì°¸ì—¬ í¬ë§í•©ë‹ˆë‹¤. ì´ˆê¸‰ìë„ ê´œì°®ì„ê¹Œìš”?',
                            createdAt: '2025-05-23T16:15:00Z',
                            likeCount: 1
                        }
                    ]
                };
                
                discussionComments = sampleComments[discussionId] || [];
                renderComments(discussionComments);
                
            } catch (error) {
                console.error('ëŒ“ê¸€ ë¡œë“œ ì˜¤ë¥˜:', error);
            }
        }
        
        // ëŒ“ê¸€ ë Œë”ë§
        function renderComments(comments) {
            const commentList = document.getElementById('comment-list');
            const emptyComments = document.getElementById('empty-comments');
            const commentCount = document.getElementById('comment-count');
            
            commentCount.textContent = comments.length;
            
            if (comments.length === 0) {
                commentList.style.display = 'none';
                emptyComments.style.display = 'block';
                return;
            }
            
            commentList.style.display = 'block';
            emptyComments.style.display = 'none';
            
            commentList.innerHTML = comments.map(comment => `
                <div class="comment-item">
                    <div class="comment-header">
                        <span class="comment-author">${comment.author}</span>
                        <span class="comment-time">${formatDate(new Date(comment.createdAt))}</span>
                    </div>
                    <div class="comment-content">${comment.content}</div>
                    <div class="comment-actions">
                        <button class="comment-action" onclick="likeComment(${comment.id})">
                            ğŸ‘ ${comment.likeCount}
                        </button>
                        <button class="comment-action" onclick="replyToComment(${comment.id})">
                            ğŸ’¬ ë‹µê¸€
                        </button>
                    </div>
                </div>
            `).join('');
        }
        
        // ë‚ ì§œ í¬ë§·íŒ…
        function formatDate(date) {
            const now = new Date();
            const diffMs = now - date;
            const diffHours = Math.floor(diffMs / (1000 * 60 * 60));
            const diffDays = Math.floor(diffHours / 24);
            
            if (diffDays > 0) {
                return `${diffDays}ì¼ ì „`;
            } else if (diffHours > 0) {
                return `${diffHours}ì‹œê°„ ì „`;
            } else {
                return 'ë°©ê¸ˆ ì „';
            }
        }
        
        // ì¹´í…Œê³ ë¦¬ í…ìŠ¤íŠ¸ ë³€í™˜
        function getCategoryText(category) {
            const categoryMap = {
                'question': 'ì§ˆë¬¸',
                'discussion': 'í† ë¡ ',
                'announcement': 'ê³µì§€',
                'tip': 'íŒ ê³µìœ '
            };
            return categoryMap[category] || 'ê¸°íƒ€';
        }
        
        // ì¢‹ì•„ìš” í† ê¸€
        function toggleLike() {
            if (!currentDiscussion) return;
            
            // ì¢‹ì•„ìš” ìƒíƒœ í† ê¸€ (ì‹¤ì œë¡œëŠ” ì„œë²„ì— ìš”ì²­)
            currentDiscussion.likeCount += 1;
            document.getElementById('like-count').textContent = currentDiscussion.likeCount;
            
            // ì•„ì´ì½˜ ë³€ê²½
            const likeIcon = document.getElementById('like-icon');
            likeIcon.textContent = 'ğŸ’™';
            setTimeout(() => {
                likeIcon.textContent = 'ğŸ‘';
            }, 1000);
        }
        
        // ëŒ“ê¸€ ì‘ì„± í¼ìœ¼ë¡œ ìŠ¤í¬ë¡¤
        function scrollToCommentForm() {
            document.querySelector('.comment-form').scrollIntoView({ 
                behavior: 'smooth' 
            });
            document.getElementById('comment-textarea').focus();
        }
        
        // ëŒ“ê¸€ ì‘ì„±
        async function submitComment() {
            const textarea = document.getElementById('comment-textarea');
            const content = textarea.value.trim();
            
            if (!content) {
                alert('ëŒ“ê¸€ ë‚´ìš©ì„ ì…ë ¥í•´ì£¼ì„¸ìš”.');
                return;
            }
            
            try {
                // ì‹¤ì œë¡œëŠ” ì„œë²„ì— POST ìš”ì²­
                const newComment = {
                    id: discussionComments.length + 1,
                    author: currentUser?.username || 'ìµëª…',
                    content: content,
                    createdAt: new Date().toISOString(),
                    likeCount: 0
                };
                
                discussionComments.push(newComment);
                renderComments(discussionComments);
                clearCommentForm();
                
                alert('ëŒ“ê¸€ì´ ì‘ì„±ë˜ì—ˆìŠµë‹ˆë‹¤!');
                
            } catch (error) {
                console.error('ëŒ“ê¸€ ì‘ì„± ì˜¤ë¥˜:', error);
                alert('ëŒ“ê¸€ ì‘ì„± ì¤‘ ì˜¤ë¥˜ê°€ ë°œìƒí–ˆìŠµë‹ˆë‹¤.');
            }
        }
        
        // ëŒ“ê¸€ í¼ ì´ˆê¸°í™”
        function clearCommentForm() {
            document.getElementById('comment-textarea').value = '';
        }
        
        // ëŒ“ê¸€ ì¢‹ì•„ìš”
        function likeComment(commentId) {
            console.log('ëŒ“ê¸€ ì¢‹ì•„ìš”:', commentId);
            // ì‹¤ì œë¡œëŠ” ì„œë²„ì— ìš”ì²­
        }
        
        // ëŒ“ê¸€ì— ë‹µê¸€
        function replyToComment(commentId) {
            console.log('ëŒ“ê¸€ ë‹µê¸€:', commentId);
            scrollToCommentForm();
        }
        
        // í† ë¡  ìˆ˜ì •
        function editDiscussion() {
            alert('í† ë¡  ìˆ˜ì • ê¸°ëŠ¥ì€ ì¶”í›„ êµ¬í˜„ë  ì˜ˆì •ì…ë‹ˆë‹¤.');
        }
        
        // ë¡œê·¸ì•„ì›ƒ
        function logout() {
            if (confirm('ë¡œê·¸ì•„ì›ƒ í•˜ì‹œê² ìŠµë‹ˆê¹Œ?')) {
                localStorage.removeItem('authToken');
                localStorage.removeItem('userInfo');
                window.location.href = '/';
            }
        }
    </script>
</body>
</html>