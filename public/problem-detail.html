<!DOCTYPE html>
<html lang="ko">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Î¨∏Ï†ú ÏÉÅÏÑ∏ - PBT LMS</title>
    <style>
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }
        
        body {
            font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            min-height: 100vh;
            line-height: 1.6;
        }
        
        .navbar {
            background: rgba(255, 255, 255, 0.95);
            padding: 1rem 2rem;
            box-shadow: 0 4px 20px rgba(0, 0, 0, 0.1);
            backdrop-filter: blur(10px);
            display: flex;
            justify-content: space-between;
            align-items: center;
        }
        
        .navbar .logo {
            font-size: 1.5rem;
            font-weight: 700;
            color: #4a5568;
        }
        
        .navbar .nav-links {
            display: flex;
            gap: 1rem;
            align-items: center;
        }
        
        .navbar .nav-link {
            color: #4a5568;
            text-decoration: none;
            padding: 0.5rem 1rem;
            border-radius: 8px;
            transition: all 0.3s ease;
        }
        
        .navbar .nav-link:hover {
            background: rgba(102, 126, 234, 0.1);
            color: #667eea;
        }
        
        .navbar .logout-btn {
            padding: 0.5rem 1rem;
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            color: white;
            border: none;
            border-radius: 8px;
            cursor: pointer;
            font-weight: 500;
            transition: all 0.3s ease;
        }
        
        .container {
            max-width: 1400px;
            margin: 2rem auto;
            padding: 0 2rem;
            display: grid;
            grid-template-columns: 1fr 1fr;
            gap: 2rem;
            height: calc(100vh - 120px);
        }
        
        .problem-panel {
            background: rgba(255, 255, 255, 0.95);
            border-radius: 15px;
            padding: 2rem;
            box-shadow: 0 10px 30px rgba(0, 0, 0, 0.15);
            overflow-y: auto;
        }
        
        .code-panel {
            background: rgba(255, 255, 255, 0.95);
            border-radius: 15px;
            padding: 1rem;
            box-shadow: 0 10px 30px rgba(0, 0, 0, 0.15);
            display: flex;
            flex-direction: column;
        }
        
        .problem-header {
            border-bottom: 2px solid #e2e8f0;
            padding-bottom: 1rem;
            margin-bottom: 1.5rem;
        }
        
        .problem-title {
            color: #4a5568;
            font-size: 1.8rem;
            font-weight: 700;
            margin-bottom: 0.5rem;
        }
        
        .problem-meta {
            display: flex;
            gap: 1rem;
            margin-bottom: 1rem;
        }
        
        .meta-tag {
            padding: 0.4rem 1rem;
            border-radius: 20px;
            font-weight: 500;
            font-size: 0.9rem;
        }
        
        .difficulty-beginner {
            background: #c6f6d5;
            color: #276749;
        }
        
        .difficulty-intermediate {
            background: #fed7c3;
            color: #c05621;
        }
        
        .difficulty-advanced {
            background: #fed7e2;
            color: #9b2c2c;
        }
        
        .category-tag {
            background: #e6fffa;
            color: #234e52;
        }
        
        .problem-description {
            color: #4a5568;
            line-height: 1.8;
            margin-bottom: 1.5rem;
        }
        
        .problem-examples {
            margin-top: 1.5rem;
        }
        
        .example {
            background: #f7fafc;
            border: 1px solid #e2e8f0;
            border-radius: 8px;
            padding: 1rem;
            margin-bottom: 1rem;
        }
        
        .example-title {
            font-weight: 600;
            color: #4a5568;
            margin-bottom: 0.5rem;
        }
        
        .example-content {
            background: #1a202c;
            color: #f7fafc;
            padding: 0.8rem;
            border-radius: 6px;
            font-family: 'Monaco', 'Menlo', 'Ubuntu Mono', monospace;
            font-size: 0.9rem;
        }
        
        .code-header {
            display: flex;
            justify-content: space-between;
            align-items: center;
            margin-bottom: 1rem;
        }
        
        .language-selector {
            padding: 0.5rem;
            border: 2px solid #e2e8f0;
            border-radius: 8px;
            background: white;
        }
        
        .code-editor {
            flex: 1;
            background: #1a202c;
            border: none;
            border-radius: 8px;
            padding: 1rem;
            color: #f7fafc;
            font-family: 'Monaco', 'Menlo', 'Ubuntu Mono', monospace;
            font-size: 14px;
            resize: none;
            outline: none;
            margin-bottom: 1rem;
        }
        
        .action-buttons {
            display: flex;
            gap: 1rem;
            margin-bottom: 1rem;
        }
        
        .btn {
            padding: 0.8rem 1.5rem;
            border: none;
            border-radius: 8px;
            font-weight: 500;
            cursor: pointer;
            transition: all 0.3s ease;
            font-size: 0.9rem;
        }
        
        .btn-run {
            background: #4299e1;
            color: white;
        }
        
        .btn-run:hover {
            background: #3182ce;
        }
        
        .btn-submit {
            background: #48bb78;
            color: white;
        }
        
        .btn-submit:hover {
            background: #38a169;
        }
        
        .btn-reset {
            background: #ed8936;
            color: white;
        }
        
        .btn-reset:hover {
            background: #dd6b20;
        }
        
        .output-section {
            background: #f7fafc;
            border: 1px solid #e2e8f0;
            border-radius: 8px;
            padding: 1rem;
            min-height: 150px;
        }
        
        .output-header {
            font-weight: 600;
            color: #4a5568;
            margin-bottom: 0.5rem;
        }
        
        .output-content {
            background: #1a202c;
            color: #f7fafc;
            padding: 0.8rem;
            border-radius: 6px;
            font-family: 'Monaco', 'Menlo', 'Ubuntu Mono', monospace;
            font-size: 0.9rem;
            white-space: pre-wrap;
            min-height: 100px;
        }
        
        .loading {
            display: none;
            text-align: center;
            padding: 2rem;
        }
        
        .spinner {
            border: 3px solid #f3f3f3;
            border-top: 3px solid #667eea;
            border-radius: 50%;
            width: 40px;
            height: 40px;
            animation: spin 1s linear infinite;
            margin: 0 auto 1rem;
        }
        
        @keyframes spin {
            0% { transform: rotate(0deg); }
            100% { transform: rotate(360deg); }
        }
        
        @media (max-width: 1200px) {
            .container {
                grid-template-columns: 1fr;
                height: auto;
            }
            
            .code-panel {
                min-height: 600px;
            }
        }
        
        @media (max-width: 768px) {
            .navbar {
                padding: 1rem;
                flex-direction: column;
                gap: 1rem;
            }
            
            .container {
                padding: 0 1rem;
                gap: 1rem;
            }
            
            .problem-panel, .code-panel {
                padding: 1rem;
            }
            
            .action-buttons {
                flex-direction: column;
            }
        }
    </style>
</head>
<body>
    <nav class="navbar">
        <div class="logo">üß© PBT LMS</div>
        <div class="nav-links">
            <a href="/dashboard.html" class="nav-link">ÎåÄÏãúÎ≥¥Îìú</a>
            <a href="/courses.html" class="nav-link">ÎÇ¥ Í≥ºÏ†ï</a>
            <a href="/problems.html" class="nav-link">Î¨∏Ï†ú Î™©Î°ù</a>
            <a href="/discussions.html" class="nav-link">ÌÜ†Î°†</a>
            <button class="logout-btn" onclick="logout()">Î°úÍ∑∏ÏïÑÏõÉ</button>
        </div>
    </nav>
    
    <div class="container">
        <!-- Î¨∏Ï†ú Ï†ïÎ≥¥ Ìå®ÎÑê -->
        <div class="problem-panel">
            <div id="loading" class="loading">
                <div class="spinner"></div>
                <p>Î¨∏Ï†ú Ï†ïÎ≥¥Î•º Î∂àÎü¨Ïò§Îäî Ï§ë...</p>
            </div>
            
            <div id="problem-content" style="display: none;">
                <div class="problem-header">
                    <h1 id="problem-title" class="problem-title">Î¨∏Ï†ú Ï†úÎ™©</h1>
                    <div id="problem-meta" class="problem-meta">
                        <!-- Î©îÌÉÄ Ï†ïÎ≥¥Í∞Ä Ïó¨Í∏∞Ïóê Ï∂îÍ∞ÄÎê©ÎãàÎã§ -->
                    </div>
                </div>
                
                <div id="problem-description" class="problem-description">
                    <!-- Î¨∏Ï†ú ÏÑ§Î™ÖÏù¥ Ïó¨Í∏∞Ïóê Ï∂îÍ∞ÄÎê©ÎãàÎã§ -->
                </div>
                
                <div class="problem-examples">
                    <h3>ÏòàÏ†ú</h3>
                    <div id="examples-container">
                        <!-- ÏòàÏ†úÎì§Ïù¥ Ïó¨Í∏∞Ïóê Ï∂îÍ∞ÄÎê©ÎãàÎã§ -->
                    </div>
                </div>
            </div>
        </div>
        
        <!-- ÏΩîÎìú ÏóêÎîîÌÑ∞ Ìå®ÎÑê -->
        <div class="code-panel">
            <div class="code-header">
                <h3>ÏΩîÎìú ÏûëÏÑ±</h3>
                <select id="language-selector" class="language-selector" onchange="changeLanguage()">
                    <option value="python">Python</option>
                    <option value="javascript">JavaScript</option>
                    <option value="java">Java</option>
                    <option value="cpp">C++</option>
                </select>
            </div>
            
            <textarea id="code-editor" class="code-editor" placeholder="Ïó¨Í∏∞Ïóê ÏΩîÎìúÎ•º ÏûëÏÑ±ÌïòÏÑ∏Ïöî..."></textarea>
            
            <div class="action-buttons">
                <button class="btn btn-run" onclick="runCode()">‚ñ∂Ô∏è Ïã§Ìñâ</button>
                <button class="btn btn-submit" onclick="submitCode()">‚úÖ Ï†úÏ∂ú</button>
                <button class="btn btn-reset" onclick="resetCode()">üîÑ Ï¥àÍ∏∞Ìôî</button>
            </div>
            
            <div class="output-section">
                <div class="output-header">Ïã§Ìñâ Í≤∞Í≥º</div>
                <div id="output-content" class="output-content">ÏΩîÎìúÎ•º Ïã§ÌñâÌïòÎ©¥ Í≤∞Í≥ºÍ∞Ä Ïó¨Í∏∞Ïóê ÌëúÏãúÎê©ÎãàÎã§.</div>
            </div>
        </div>
    </div>

    <script>
        let currentProblem = null;
        let problemId = null;
        
        // ÌéòÏù¥ÏßÄ Î°úÎìú Ïãú Ïù∏Ï¶ù ÌôïÏù∏ Î∞è Î¨∏Ï†ú Ï†ïÎ≥¥ Î°úÎìú
        document.addEventListener('DOMContentLoaded', async () => {
            const token = localStorage.getItem('authToken');
            
            if (!token) {
                alert('Î°úÍ∑∏Ïù∏Ïù¥ ÌïÑÏöîÌï©ÎãàÎã§.');
                window.location.href = '/login.html';
                return;
            }
            
            // URLÏóêÏÑú Î¨∏Ï†ú ID Ï∂îÏ∂ú
            const urlParams = new URLSearchParams(window.location.search);
            problemId = urlParams.get('id');
            
            if (!problemId) {
                alert('Ïú†Ìö®ÌïòÏßÄ ÏïäÏùÄ Î¨∏Ï†ú IDÏûÖÎãàÎã§.');
                window.location.href = '/problems.html';
                return;
            }
            
            await loadProblem(problemId);
        });
        
        // Î¨∏Ï†ú Ï†ïÎ≥¥ Î°úÎìú
        async function loadProblem(id) {
            const loading = document.getElementById('loading');
            const problemContent = document.getElementById('problem-content');
            const token = localStorage.getItem('authToken');
            
            try {
                const response = await fetch(`/api/problems/${id}`, {
                    headers: {
                        'Authorization': `Bearer ${token}`
                    }
                });
                
                if (response.ok) {
                    const result = await response.json();
                    currentProblem = result.problem || result.data;
                    
                    loading.style.display = 'none';
                    problemContent.style.display = 'block';
                    
                    renderProblem(currentProblem);
                } else {
                    console.log('API ÏùëÎãµ Ïã§Ìå®, ÏÉòÌîå Îç∞Ïù¥ÌÑ∞ ÏÇ¨Ïö©');
                    loading.style.display = 'none';
                    problemContent.style.display = 'block';
                    loadSampleProblem(id);
                }
                
            } catch (error) {
                console.error('Î¨∏Ï†ú Î°úÎìú Ïò§Î•ò:', error);
                loading.style.display = 'none';
                problemContent.style.display = 'block';
                loadSampleProblem(id);
            }
        }
        
        // ÏÉòÌîå Î¨∏Ï†ú Îç∞Ïù¥ÌÑ∞ Î°úÎìú
        function loadSampleProblem(id) {
            const sampleProblems = {
                '1': {
                    id: 1,
                    title: 'Îëê ÏàòÏùò Ìï©',
                    description: `Ï†ïÏàò Î∞∞Ïó¥ numsÏôÄ Ï†ïÏàò targetÏù¥ Ï£ºÏñ¥Ï°åÏùÑ Îïå, targetÍ≥º Í∞ôÏùÄ Í∞íÏù¥ ÎêòÎäî Îëê ÏàòÏùò Ïù∏Îç±Ïä§Î•º Î∞òÌôòÌïòÏÑ∏Ïöî.

Í∞Å ÏûÖÎ†•Ïóê ÎåÄÌï¥ Ï†ïÌôïÌûà ÌïòÎÇòÏùò Ìï¥ÎãµÏù¥ Ï°¥Ïû¨ÌïúÎã§Í≥† Í∞ÄÏ†ïÌï† Ïàò ÏûàÏúºÎ©∞, Í∞ôÏùÄ ÏõêÏÜåÎ•º Îëê Î≤à ÏÇ¨Ïö©Ìï† ÏàòÎäî ÏóÜÏäµÎãàÎã§.

ÎãµÏùÄ Ïñ¥Îñ§ ÏàúÏÑúÎ°úÎì† Î∞òÌôòÌï† Ïàò ÏûàÏäµÎãàÎã§.`,
                    difficulty: 'beginner',
                    category: 'algorithm',
                    maxScore: 100,
                    timeLimit: 30,
                    examples: [
                        {
                            input: 'nums = [2,7,11,15], target = 9',
                            output: '[0,1]',
                            explanation: 'nums[0] + nums[1] = 2 + 7 = 9Ïù¥ÎØÄÎ°ú [0, 1]ÏùÑ Î∞òÌôòÌï©ÎãàÎã§.'
                        },
                        {
                            input: 'nums = [3,2,4], target = 6',
                            output: '[1,2]',
                            explanation: 'nums[1] + nums[2] = 2 + 4 = 6Ïù¥ÎØÄÎ°ú [1, 2]Î•º Î∞òÌôòÌï©ÎãàÎã§.'
                        }
                    ]
                },
                '2': {
                    id: 2,
                    title: 'Ïä§ÌÉù Íµ¨ÌòÑÌïòÍ∏∞',
                    description: `Í∏∞Î≥∏Ï†ÅÏù∏ Ïä§ÌÉù ÏûêÎ£åÍµ¨Ï°∞Î•º Íµ¨ÌòÑÌïòÏÑ∏Ïöî. Ïä§ÌÉùÏùÄ LIFO(Last In First Out) Î∞©ÏãùÏúºÎ°ú ÎèôÏûëÌï©ÎãàÎã§.

Îã§Ïùå Ïó∞ÏÇ∞Îì§ÏùÑ Íµ¨ÌòÑÌï¥Ïïº Ìï©ÎãàÎã§:
- push(x): ÏõêÏÜå xÎ•º Ïä§ÌÉùÏùò Îß® ÏúÑÏóê Ï∂îÍ∞Ä
- pop(): Ïä§ÌÉùÏùò Îß® ÏúÑ ÏõêÏÜåÎ•º Ï†úÍ±∞ÌïòÍ≥† Î∞òÌôò
- top(): Ïä§ÌÉùÏùò Îß® ÏúÑ ÏõêÏÜåÎ•º Î∞òÌôò (Ï†úÍ±∞ÌïòÏßÄ ÏïäÏùå)
- empty(): Ïä§ÌÉùÏù¥ ÎπÑÏñ¥ÏûàÏúºÎ©¥ true, ÏïÑÎãàÎ©¥ false Î∞òÌôò`,
                    difficulty: 'beginner',
                    category: 'data-structure',
                    maxScore: 100,
                    timeLimit: 45,
                    examples: [
                        {
                            input: 'stack.push(1)\nstack.push(2)\nstack.top()',
                            output: '2',
                            explanation: 'Ïä§ÌÉùÏóê 1, 2Î•º ÏàúÏÑúÎåÄÎ°ú Ï∂îÍ∞ÄÌïú ÌõÑ Îß® ÏúÑ ÏõêÏÜåÏù∏ 2Î•º Î∞òÌôòÌï©ÎãàÎã§.'
                        }
                    ]
                },
                '3': {
                    id: 3,
                    title: 'Ïù¥ÏßÑ ÌÉêÏÉâ Ìä∏Î¶¨',
                    description: `Ïù¥ÏßÑ ÌÉêÏÉâ Ìä∏Î¶¨(Binary Search Tree)Î•º Íµ¨ÌòÑÌïòÏÑ∏Ïöî.

Íµ¨ÌòÑÌï¥Ïïº Ìï† Ïó∞ÏÇ∞Îì§:
- insert(val): Í∞íÏùÑ Ìä∏Î¶¨Ïóê ÏÇΩÏûÖ
- search(val): Í∞íÏù¥ Ìä∏Î¶¨Ïóê ÏûàÎäîÏßÄ Í≤ÄÏÉâ
- delete(val): Í∞íÏùÑ Ìä∏Î¶¨ÏóêÏÑú ÏÇ≠Ï†ú
- inorder(): Ï§ëÏúÑ ÏàúÌöå Í≤∞Í≥º Î∞òÌôò`,
                    difficulty: 'intermediate',
                    category: 'data-structure',
                    maxScore: 150,
                    timeLimit: 60,
                    examples: [
                        {
                            input: 'bst.insert(5)\nbst.insert(3)\nbst.insert(7)\nbst.inorder()',
                            output: '[3, 5, 7]',
                            explanation: 'Ï§ëÏúÑ ÏàúÌöå Ïãú Ïò§Î¶ÑÏ∞®ÏàúÏúºÎ°ú Ï†ïÎ†¨Îêú Í≤∞Í≥ºÎ•º Î∞òÌôòÌï©ÎãàÎã§.'
                        }
                    ]
                },
                '4': {
                    id: 4,
                    title: 'REST API ÏÑ§Í≥Ñ',
                    description: `ÏÇ¨Ïö©Ïûê Í¥ÄÎ¶¨Î•º ÏúÑÌïú RESTful APIÎ•º ÏÑ§Í≥ÑÌïòÍ≥† Íµ¨ÌòÑÌïòÏÑ∏Ïöî.

ÌïÑÏöîÌïú ÏóîÎìúÌè¨Ïù∏Ìä∏Îì§:
- GET /users: Î™®Îì† ÏÇ¨Ïö©Ïûê Ï°∞Ìöå
- GET /users/:id: ÌäπÏ†ï ÏÇ¨Ïö©Ïûê Ï°∞Ìöå
- POST /users: ÏÉà ÏÇ¨Ïö©Ïûê ÏÉùÏÑ±
- PUT /users/:id: ÏÇ¨Ïö©Ïûê Ï†ïÎ≥¥ ÏàòÏ†ï
- DELETE /users/:id: ÏÇ¨Ïö©Ïûê ÏÇ≠Ï†ú

Í∞Å ÏóîÎìúÌè¨Ïù∏Ìä∏Îäî Ï†ÅÏ†àÌïú HTTP ÏÉÅÌÉú ÏΩîÎìúÏôÄ ÏùëÎãµÏùÑ Î∞òÌôòÌï¥Ïïº Ìï©ÎãàÎã§.`,
                    difficulty: 'intermediate',
                    category: 'web-development',
                    maxScore: 200,
                    timeLimit: 90,
                    examples: [
                        {
                            input: 'GET /users/1',
                            output: '{"id": 1, "name": "John", "email": "john@example.com"}',
                            explanation: 'IDÍ∞Ä 1Ïù∏ ÏÇ¨Ïö©ÏûêÏùò Ï†ïÎ≥¥Î•º JSON ÌòïÌÉúÎ°ú Î∞òÌôòÌï©ÎãàÎã§.'
                        }
                    ]
                },
                '5': {
                    id: 5,
                    title: 'Í∑∏ÎûòÌîÑ ÏµúÎã® Í≤ΩÎ°ú',
                    description: `Í∞ÄÏ§ëÏπòÍ∞Ä ÏûàÎäî Î∞©Ìñ• Í∑∏ÎûòÌîÑÏóêÏÑú ÏãúÏûë ÎÖ∏ÎìúÎ∂ÄÌÑ∞ Î™®Îì† Îã§Î•∏ ÎÖ∏ÎìúÍπåÏßÄÏùò ÏµúÎã® Í≤ΩÎ°úÎ•º Ï∞æÎäî Îã§ÏùµÏä§Ìä∏Îùº ÏïåÍ≥†Î¶¨Ï¶òÏùÑ Íµ¨ÌòÑÌïòÏÑ∏Ïöî.

ÏûÖÎ†•:
- graph: Ïù∏Ï†ë Î¶¨Ïä§Ìä∏Î°ú ÌëúÌòÑÎêú Í∑∏ÎûòÌîÑ
- start: ÏãúÏûë ÎÖ∏Îìú

Ï∂úÎ†•:
- ÏãúÏûë ÎÖ∏ÎìúÎ∂ÄÌÑ∞ Í∞Å ÎÖ∏ÎìúÍπåÏßÄÏùò ÏµúÎã® Í±∞Î¶¨Î•º Îã¥ÏùÄ ÎîïÏÖîÎÑàÎ¶¨`,
                    difficulty: 'advanced',
                    category: 'algorithm',
                    maxScore: 300,
                    timeLimit: 120,
                    examples: [
                        {
                            input: 'graph = {0: [(1, 4), (2, 2)], 1: [(2, 1), (3, 5)], 2: [(3, 8)], 3: []}\nstart = 0',
                            output: '{0: 0, 1: 4, 2: 2, 3: 9}',
                            explanation: 'ÏãúÏûë ÎÖ∏Îìú 0Î∂ÄÌÑ∞ Í∞Å ÎÖ∏ÎìúÍπåÏßÄÏùò ÏµúÎã® Í±∞Î¶¨ÏûÖÎãàÎã§.'
                        }
                    ]
                }
            };
            
            currentProblem = sampleProblems[id] || sampleProblems['1'];
            renderProblem(currentProblem);
        }
        
        // Î¨∏Ï†ú Î†åÎçîÎßÅ
        function renderProblem(problem) {
            // Ï†úÎ™© ÏÑ§Ï†ï
            document.getElementById('problem-title').textContent = problem.title;
            document.title = `${problem.title} - PBT LMS`;
            
            // Î©îÌÉÄ Ï†ïÎ≥¥ ÏÑ§Ï†ï
            const metaContainer = document.getElementById('problem-meta');
            const difficultyClass = `difficulty-${problem.difficulty}`;
            const difficultyText = {
                'beginner': 'Ï¥àÍ∏â',
                'intermediate': 'Ï§ëÍ∏â',
                'advanced': 'Í≥†Í∏â'
            }[problem.difficulty] || 'Ï¥àÍ∏â';
            
            const categoryText = {
                'algorithm': 'ÏïåÍ≥†Î¶¨Ï¶ò',
                'data-structure': 'ÏûêÎ£åÍµ¨Ï°∞',
                'web-development': 'Ïõπ Í∞úÎ∞ú',
                'database': 'Îç∞Ïù¥ÌÑ∞Î≤†Ïù¥Ïä§'
            }[problem.category] || problem.category;
            
            metaContainer.innerHTML = `
                <span class="meta-tag ${difficultyClass}">${difficultyText}</span>
                <span class="meta-tag category-tag">${categoryText}</span>
                <span class="meta-tag">ÏµúÎåÄ Ï†êÏàò: ${problem.maxScore}Ï†ê</span>
                ${problem.timeLimit ? `<span class="meta-tag">‚è±Ô∏è ${problem.timeLimit}Î∂Ñ</span>` : ''}
            `;
            
            // Î¨∏Ï†ú ÏÑ§Î™Ö ÏÑ§Ï†ï
            document.getElementById('problem-description').innerHTML = problem.description.replace(/\n/g, '<br>');
            
            // ÏòàÏ†ú ÏÑ§Ï†ï
            const examplesContainer = document.getElementById('examples-container');
            if (problem.examples && problem.examples.length > 0) {
                examplesContainer.innerHTML = problem.examples.map((example, index) => `
                    <div class="example">
                        <div class="example-title">ÏòàÏ†ú ${index + 1}</div>
                        <div style="margin-bottom: 0.5rem;">
                            <strong>ÏûÖÎ†•:</strong>
                            <div class="example-content">${example.input}</div>
                        </div>
                        <div style="margin-bottom: 0.5rem;">
                            <strong>Ï∂úÎ†•:</strong>
                            <div class="example-content">${example.output}</div>
                        </div>
                        ${example.explanation ? `
                            <div>
                                <strong>ÏÑ§Î™Ö:</strong> ${example.explanation}
                            </div>
                        ` : ''}
                    </div>
                `).join('');
            } else {
                examplesContainer.innerHTML = '<p>ÏòàÏ†úÍ∞Ä Ï§ÄÎπÑÎêòÏñ¥ ÏûàÏßÄ ÏïäÏäµÎãàÎã§.</p>';
            }
            
            // Í∏∞Î≥∏ ÏΩîÎìú ÌÖúÌîåÎ¶ø ÏÑ§Ï†ï
            setDefaultCode();
        }
        
        // Ïñ∏Ïñ¥Î≥Ñ Í∏∞Î≥∏ ÏΩîÎìú ÌÖúÌîåÎ¶ø
        const codeTemplates = {
            python: `def solution():
    # Ïó¨Í∏∞Ïóê ÏΩîÎìúÎ•º ÏûëÏÑ±ÌïòÏÑ∏Ïöî
    pass

# ÌÖåÏä§Ìä∏
if __name__ == "__main__":
    result = solution()
    print(result)`,
            javascript: `function solution() {
    // Ïó¨Í∏∞Ïóê ÏΩîÎìúÎ•º ÏûëÏÑ±ÌïòÏÑ∏Ïöî
    
}

// ÌÖåÏä§Ìä∏
console.log(solution());`,
            java: `public class Solution {
    public static void main(String[] args) {
        Solution sol = new Solution();
        // Ïó¨Í∏∞Ïóê ÌÖåÏä§Ìä∏ ÏΩîÎìúÎ•º ÏûëÏÑ±ÌïòÏÑ∏Ïöî
    }
    
    public void solution() {
        // Ïó¨Í∏∞Ïóê ÏΩîÎìúÎ•º ÏûëÏÑ±ÌïòÏÑ∏Ïöî
        
    }
}`,
            cpp: `#include <iostream>
#include <vector>
using namespace std;

int main() {
    // Ïó¨Í∏∞Ïóê ÏΩîÎìúÎ•º ÏûëÏÑ±ÌïòÏÑ∏Ïöî
    
    return 0;
}`
        };
        
        // Ïñ∏Ïñ¥ Î≥ÄÍ≤Ω
        function changeLanguage() {
            setDefaultCode();
        }
        
        // Í∏∞Î≥∏ ÏΩîÎìú ÏÑ§Ï†ï
        function setDefaultCode() {
            const language = document.getElementById('language-selector').value;
            const codeEditor = document.getElementById('code-editor');
            codeEditor.value = codeTemplates[language] || codeTemplates.python;
        }
        
        // ÏΩîÎìú Ïã§Ìñâ
        async function runCode() {
            const language = document.getElementById('language-selector').value;
            const code = document.getElementById('code-editor').value;
            const outputContent = document.getElementById('output-content');
            const token = localStorage.getItem('authToken');
            
            outputContent.textContent = 'Ïã§Ìñâ Ï§ë...';
            
            try {
                const response = await fetch(`/api/problems/${problemId}/run`, {
                    method: 'POST',
                    headers: {
                        'Authorization': `Bearer ${token}`,
                        'Content-Type': 'application/json'
                    },
                    body: JSON.stringify({
                        code: code,
                        language: language
                    })
                });
                
                const result = await response.json();
                
                if (response.ok) {
                    outputContent.textContent = result.output || 'Ïã§Ìñâ ÏôÑÎ£å';
                } else {
                    outputContent.textContent = `Ïò§Î•ò: ${result.message}`;
                }
                
            } catch (error) {
                console.error('ÏΩîÎìú Ïã§Ìñâ Ïò§Î•ò:', error);
                outputContent.textContent = `Ïã§Ìñâ Ï§ë Ïò§Î•òÍ∞Ä Î∞úÏÉùÌñàÏäµÎãàÎã§: ${error.message}`;
            }
        }
        
        // ÏΩîÎìú Ï†úÏ∂ú
        async function submitCode() {
            const language = document.getElementById('language-selector').value;
            const code = document.getElementById('code-editor').value;
            const token = localStorage.getItem('authToken');
            
            if (!code.trim()) {
                alert('ÏΩîÎìúÎ•º ÏûëÏÑ±Ìï¥Ï£ºÏÑ∏Ïöî.');
                return;
            }
            
            if (!confirm('ÏΩîÎìúÎ•º Ï†úÏ∂úÌïòÏãúÍ≤†ÏäµÎãàÍπå?')) {
                return;
            }
            
            try {
                const response = await fetch(`/api/problems/${problemId}/submit`, {
                    method: 'POST',
                    headers: {
                        'Authorization': `Bearer ${token}`,
                        'Content-Type': 'application/json'
                    },
                    body: JSON.stringify({
                        code: code,
                        language: language
                    })
                });
                
                const result = await response.json();
                
                if (response.ok) {
                    alert(`Ï†úÏ∂úÏù¥ ÏôÑÎ£åÎêòÏóàÏäµÎãàÎã§!\nÏ†êÏàò: ${result.score || 0}Ï†ê`);
                } else {
                    alert(`Ï†úÏ∂ú Ïã§Ìå®: ${result.message}`);
                }
                
            } catch (error) {
                console.error('ÏΩîÎìú Ï†úÏ∂ú Ïò§Î•ò:', error);
                alert(`Ï†úÏ∂ú Ï§ë Ïò§Î•òÍ∞Ä Î∞úÏÉùÌñàÏäµÎãàÎã§: ${error.message}`);
            }
        }
        
        // ÏΩîÎìú Ï¥àÍ∏∞Ìôî
        function resetCode() {
            if (confirm('ÏΩîÎìúÎ•º Ï¥àÍ∏∞ÌôîÌïòÏãúÍ≤†ÏäµÎãàÍπå? ÏûëÏÑ±Ìïú ÎÇ¥Ïö©Ïù¥ Î™®Îëê ÏÇ¨ÎùºÏßëÎãàÎã§.')) {
                setDefaultCode();
            }
        }
        
        // Î°úÍ∑∏ÏïÑÏõÉ
        function logout() {
            if (confirm('Î°úÍ∑∏ÏïÑÏõÉ ÌïòÏãúÍ≤†ÏäµÎãàÍπå?')) {
                localStorage.removeItem('authToken');
                localStorage.removeItem('userInfo');
                window.location.href = '/';
            }
        }
    </script>
</body>
</html>