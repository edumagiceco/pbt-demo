<!DOCTYPE html>
<html lang="ko">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>ê³¼ì • ìƒì„¸ - PBT LMS</title>
    <style>
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }
        
        body {
            font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            min-height: 100vh;
            line-height: 1.6;
        }
        
        .navbar {
            background: rgba(255, 255, 255, 0.95);
            padding: 1rem 2rem;
            box-shadow: 0 4px 20px rgba(0, 0, 0, 0.1);
            backdrop-filter: blur(10px);
            display: flex;
            justify-content: space-between;
            align-items: center;
        }
        
        .navbar .logo {
            font-size: 1.5rem;
            font-weight: 700;
            color: #4a5568;
        }
        
        .navbar .nav-links {
            display: flex;
            gap: 1rem;
            align-items: center;
        }
        
        .navbar .nav-link {
            color: #4a5568;
            text-decoration: none;
            padding: 0.5rem 1rem;
            border-radius: 8px;
            transition: all 0.3s ease;
        }
        
        .navbar .nav-link:hover {
            background: rgba(102, 126, 234, 0.1);
            color: #667eea;
        }
        
        .navbar .logout-btn {
            padding: 0.5rem 1rem;
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            color: white;
            border: none;
            border-radius: 8px;
            cursor: pointer;
            font-weight: 500;
            transition: all 0.3s ease;
        }
        
        .navbar .logout-btn:hover {
            transform: translateY(-1px);
            box-shadow: 0 5px 15px rgba(102, 126, 234, 0.3);
        }
        
        .container {
            max-width: 1200px;
            margin: 2rem auto;
            padding: 0 2rem;
        }
        
        .breadcrumb {
            background: rgba(255, 255, 255, 0.95);
            padding: 1rem 1.5rem;
            border-radius: 10px;
            margin-bottom: 1.5rem;
            font-size: 0.9rem;
            color: #718096;
        }
        
        .breadcrumb a {
            color: #667eea;
            text-decoration: none;
        }
        
        .breadcrumb a:hover {
            text-decoration: underline;
        }
        
        .course-header {
            background: rgba(255, 255, 255, 0.95);
            padding: 2rem;
            border-radius: 15px;
            margin-bottom: 2rem;
            box-shadow: 0 10px 30px rgba(0, 0, 0, 0.15);
        }
        
        .course-title {
            font-size: 2.5rem;
            color: #4a5568;
            margin-bottom: 1rem;
        }
        
        .course-meta {
            display: flex;
            gap: 2rem;
            margin-bottom: 1.5rem;
            flex-wrap: wrap;
        }
        
        .meta-item {
            display: flex;
            align-items: center;
            gap: 0.5rem;
            color: #718096;
        }
        
        .meta-item .icon {
            font-size: 1.2rem;
        }
        
        .progress-section {
            margin-bottom: 1.5rem;
        }
        
        .progress-label {
            display: flex;
            justify-content: space-between;
            margin-bottom: 0.5rem;
            font-weight: 500;
            color: #4a5568;
        }
        
        .progress-bar {
            background: #e2e8f0;
            border-radius: 10px;
            height: 12px;
            overflow: hidden;
        }
        
        .progress-fill {
            height: 100%;
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            transition: width 0.3s ease;
        }
        
        .course-description {
            color: #4a5568;
            line-height: 1.7;
            margin-bottom: 2rem;
        }
        
        .content-grid {
            display: grid;
            grid-template-columns: 2fr 1fr;
            gap: 2rem;
        }
        
        .main-content {
            display: flex;
            flex-direction: column;
            gap: 2rem;
        }
        
        .sidebar {
            display: flex;
            flex-direction: column;
            gap: 2rem;
        }
        
        .section {
            background: rgba(255, 255, 255, 0.95);
            padding: 1.5rem;
            border-radius: 15px;
            box-shadow: 0 10px 30px rgba(0, 0, 0, 0.15);
        }
        
        .section-title {
            font-size: 1.3rem;
            color: #4a5568;
            margin-bottom: 1rem;
            display: flex;
            align-items: center;
            gap: 0.5rem;
        }
        
        .lecture-list {
            display: flex;
            flex-direction: column;
            gap: 1rem;
        }
        
        .lecture-item {
            display: flex;
            align-items: center;
            padding: 1rem;
            border: 1px solid #e2e8f0;
            border-radius: 10px;
            transition: all 0.3s ease;
            cursor: pointer;
        }
        
        .lecture-item:hover {
            border-color: #667eea;
            background: rgba(102, 126, 234, 0.05);
        }
        
        .lecture-icon {
            width: 40px;
            height: 40px;
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            border-radius: 10px;
            display: flex;
            align-items: center;
            justify-content: center;
            color: white;
            font-size: 1.2rem;
            margin-right: 1rem;
        }
        
        .lecture-content {
            flex: 1;
        }
        
        .lecture-title {
            font-weight: 600;
            color: #4a5568;
            margin-bottom: 0.3rem;
        }
        
        .lecture-meta {
            font-size: 0.9rem;
            color: #718096;
        }
        
        .lecture-status {
            display: flex;
            align-items: center;
            gap: 0.5rem;
            font-size: 0.9rem;
        }
        
        .status-complete {
            color: #38a169;
        }
        
        .status-current {
            color: #667eea;
        }
        
        .status-locked {
            color: #a0aec0;
        }
        
        .stats-grid {
            display: grid;
            grid-template-columns: 1fr 1fr;
            gap: 1rem;
        }
        
        .stat-item {
            text-align: center;
            padding: 1rem;
            background: rgba(102, 126, 234, 0.1);
            border-radius: 10px;
        }
        
        .stat-number {
            font-size: 2rem;
            font-weight: 700;
            color: #667eea;
        }
        
        .stat-label {
            color: #718096;
            font-size: 0.9rem;
        }
        
        .action-buttons {
            display: flex;
            gap: 1rem;
            margin-top: 1.5rem;
        }
        
        .btn {
            padding: 0.8rem 1.5rem;
            border: none;
            border-radius: 8px;
            cursor: pointer;
            font-weight: 500;
            transition: all 0.3s ease;
            text-decoration: none;
            text-align: center;
            font-size: 0.9rem;
            flex: 1;
        }
        
        .btn-primary {
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            color: white;
        }
        
        .btn-secondary {
            background: transparent;
            color: #667eea;
            border: 2px solid #667eea;
        }
        
        .btn:hover {
            transform: translateY(-2px);
            box-shadow: 0 5px 15px rgba(102, 126, 234, 0.3);
        }
        
        .loading {
            text-align: center;
            padding: 3rem;
        }
        
        .spinner {
            border: 3px solid #f3f3f3;
            border-top: 3px solid #667eea;
            border-radius: 50%;
            width: 50px;
            height: 50px;
            animation: spin 1s linear infinite;
            margin: 0 auto 1rem;
        }
        
        @keyframes spin {
            0% { transform: rotate(0deg); }
            100% { transform: rotate(360deg); }
        }
        
        .error-message {
            background: rgba(255, 255, 255, 0.95);
            padding: 2rem;
            border-radius: 15px;
            text-align: center;
            color: #e53e3e;
            box-shadow: 0 10px 30px rgba(0, 0, 0, 0.15);
        }
        
        @media (max-width: 768px) {
            .navbar {
                padding: 1rem;
                flex-direction: column;
                gap: 1rem;
            }
            
            .container {
                padding: 0 1rem;
            }
            
            .content-grid {
                grid-template-columns: 1fr;
            }
            
            .course-meta {
                flex-direction: column;
                gap: 1rem;
            }
            
            .action-buttons {
                flex-direction: column;
            }
            
            .navbar .nav-links {
                flex-wrap: wrap;
                justify-content: center;
            }
        }
    </style>
</head>
<body>
    <nav class="navbar">
        <div class="logo">ğŸ§© PBT LMS</div>
        <div class="nav-links">
            <a href="/dashboard.html" class="nav-link">ëŒ€ì‹œë³´ë“œ</a>
            <a href="/courses.html" class="nav-link">ë‚´ ê³¼ì •</a>
            <a href="/problems.html" class="nav-link">ë¬¸ì œ í’€ì´</a>
            <a href="/discussions.html" class="nav-link">í† ë¡ </a>
            <button class="logout-btn" onclick="logout()">ë¡œê·¸ì•„ì›ƒ</button>
        </div>
    </nav>
    
    <div class="container">
        <div class="breadcrumb">
            <a href="/courses.html">ë‚´ ê³¼ì •</a> > <span id="course-breadcrumb">ê³¼ì • ìƒì„¸</span>
        </div>
        
        <div id="loading" class="loading">
            <div class="spinner"></div>
            <p>ê³¼ì • ì •ë³´ë¥¼ ë¶ˆëŸ¬ì˜¤ëŠ” ì¤‘...</p>
        </div>
        
        <div id="error-message" class="error-message" style="display: none;">
            <h3>âš ï¸ ì˜¤ë¥˜ê°€ ë°œìƒí–ˆìŠµë‹ˆë‹¤</h3>
            <p id="error-text">ê³¼ì • ì •ë³´ë¥¼ ë¶ˆëŸ¬ì˜¬ ìˆ˜ ì—†ìŠµë‹ˆë‹¤.</p>
            <button class="btn btn-primary" onclick="location.reload()">ë‹¤ì‹œ ì‹œë„</button>
        </div>
        
        <div id="course-content" style="display: none;">
            <!-- ê³¼ì • í—¤ë” -->
            <div class="course-header">
                <h1 class="course-title" id="course-title">ê³¼ì •ëª…</h1>
                <div class="course-meta">
                    <div class="meta-item">
                        <span class="icon">ğŸ‘¨â€ğŸ«</span>
                        <span>ê°•ì‚¬: <span id="instructor-name">ê°•ì‚¬ëª…</span></span>
                    </div>
                    <div class="meta-item">
                        <span class="icon">ğŸ“Š</span>
                        <span>ë‚œì´ë„: <span id="course-level">ì´ˆê¸‰</span></span>
                    </div>
                    <div class="meta-item">
                        <span class="icon">ğŸ¯</span>
                        <span>ì¹´í…Œê³ ë¦¬: <span id="course-category">í”„ë¡œê·¸ë˜ë°</span></span>
                    </div>
                    <div class="meta-item">
                        <span class="icon">ğŸ‘¥</span>
                        <span>ìˆ˜ê°•ìƒ: <span id="student-count">0</span>ëª…</span>
                    </div>
                </div>
                
                <div class="progress-section">
                    <div class="progress-label">
                        <span>í•™ìŠµ ì§„ë„</span>
                        <span id="progress-percent">0%</span>
                    </div>
                    <div class="progress-bar">
                        <div class="progress-fill" id="progress-fill" style="width: 0%"></div>
                    </div>
                </div>
                
                <div class="course-description" id="course-description">
                    ê³¼ì • ì„¤ëª…ì´ ì—¬ê¸°ì— í‘œì‹œë©ë‹ˆë‹¤.
                </div>
                
                <div class="action-buttons">
                    <button class="btn btn-primary" onclick="startLearning()">í•™ìŠµ ì‹œì‘/ê³„ì†</button>
                    <a href="#" class="btn btn-secondary" id="materials-link">ìë£Œì‹¤</a>
                    <a href="#" class="btn btn-secondary" id="discussions-link">í† ë¡ </a>
                </div>
            </div>
            
            <div class="content-grid">
                <!-- ê°•ì˜ ëª©ë¡ -->
                <div class="main-content">
                    <div class="section">
                        <h2 class="section-title">
                            ğŸ“š ê°•ì˜ ëª©ë¡
                        </h2>
                        <div class="lecture-list" id="lecture-list">
                            <!-- ê°•ì˜ ëª©ë¡ì´ ì—¬ê¸°ì— ë™ì ìœ¼ë¡œ ì¶”ê°€ë©ë‹ˆë‹¤ -->
                        </div>
                    </div>
                </div>
                
                <!-- ì‚¬ì´ë“œë°” -->
                <div class="sidebar">
                    <!-- í•™ìŠµ í†µê³„ -->
                    <div class="section">
                        <h3 class="section-title">ğŸ“Š í•™ìŠµ í†µê³„</h3>
                        <div class="stats-grid">
                            <div class="stat-item">
                                <div class="stat-number" id="completed-lectures">0</div>
                                <div class="stat-label">ì™„ë£Œí•œ ê°•ì˜</div>
                            </div>
                            <div class="stat-item">
                                <div class="stat-number" id="total-lectures">0</div>
                                <div class="stat-label">ì „ì²´ ê°•ì˜</div>
                            </div>
                            <div class="stat-item">
                                <div class="stat-number" id="study-time">0</div>
                                <div class="stat-label">í•™ìŠµ ì‹œê°„</div>
                            </div>
                            <div class="stat-item">
                                <div class="stat-number" id="assignments-completed">0</div>
                                <div class="stat-label">ì™„ë£Œí•œ ê³¼ì œ</div>
                            </div>
                        </div>
                    </div>
                    
                    <!-- ê³¼ì œ ë° í€´ì¦ˆ -->
                    <div class="section">
                        <h3 class="section-title">ğŸ“ ê³¼ì œ & í€´ì¦ˆ</h3>
                        <div id="assignments-list">
                            <!-- ê³¼ì œ ëª©ë¡ì´ ì—¬ê¸°ì— ì¶”ê°€ë©ë‹ˆë‹¤ -->
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </div>

    <script>
        // URLì—ì„œ ê³¼ì • ID ì¶”ì¶œ
        const urlParams = new URLSearchParams(window.location.search);
        const courseId = urlParams.get('id');
        
        // í˜ì´ì§€ ë¡œë“œ ì‹œ ì´ˆê¸°í™”
        document.addEventListener('DOMContentLoaded', async () => {
            if (!courseId) {
                showError('ê³¼ì • IDê°€ ì—†ìŠµë‹ˆë‹¤.');
                return;
            }
            
            const token = localStorage.getItem('authToken');
            if (!token) {
                alert('ë¡œê·¸ì¸ì´ í•„ìš”í•©ë‹ˆë‹¤.');
                window.location.href = '/login.html';
                return;
            }
            
            await loadCourseDetail(courseId);
        });
        
        // ê³¼ì • ìƒì„¸ ì •ë³´ ë¡œë“œ
        async function loadCourseDetail(courseId) {
            const loading = document.getElementById('loading');
            const courseContent = document.getElementById('course-content');
            const errorMessage = document.getElementById('error-message');
            const token = localStorage.getItem('authToken');
            
            try {
                // ì´ˆê¸° ìƒíƒœ ì„¤ì •
                loading.style.display = 'block';
                courseContent.style.display = 'none';
                errorMessage.style.display = 'none';
                
                // ì‹¤ì œ API í˜¸ì¶œ
                const response = await fetch(`/api/courses/${courseId}`, {
                    headers: {
                        'Authorization': `Bearer ${token}`,
                        'Content-Type': 'application/json'
                    }
                });
                
                if (response.ok) {
                    const result = await response.json();
                    const course = result.data;
                    
                    if (!course) {
                        throw new Error('ê³¼ì • ë°ì´í„°ê°€ ì—†ìŠµë‹ˆë‹¤');
                    }
                    
                    // ê°•ì˜ ëª©ë¡ API í˜¸ì¶œ
                    const lecturesResponse = await fetch(`/api/courses/${courseId}/lectures`, {
                        headers: {
                            'Authorization': `Bearer ${token}`,
                            'Content-Type': 'application/json'
                        }
                    });
                    
                    let lectures = [];
                    if (lecturesResponse.ok) {
                        const lecturesResult = await lecturesResponse.json();
                        lectures = lecturesResult.data || [];
                    }
                    
                    loading.style.display = 'none';
                    courseContent.style.display = 'block';
                    
                    // ê³¼ì • ì •ë³´ ë Œë”ë§
                    renderCourseDetail({
                        ...course,
                        lectures: lectures,
                        instructorName: course.instructor?.fullName || 'ê°•ì‚¬ëª…',
                        progress: 65, // ì„ì‹œê°’ - ì‹¤ì œë¡œëŠ” APIì—ì„œ ê°€ì ¸ì™€ì•¼ í•¨
                        studentCount: course.enrollmentCount || 0
                    });
                    
                } else {
                    throw new Error('API í˜¸ì¶œ ì‹¤íŒ¨');
                }
                
            } catch (error) {
                console.error('ê³¼ì • ë¡œë“œ ì˜¤ë¥˜:', error);
                loading.style.display = 'none';
                
                // ì˜¤ë¥˜ ì‹œ ìƒ˜í”Œ ë°ì´í„° ì‚¬ìš©
                courseContent.style.display = 'block';
                
                // ë¡œë”© ì‹œë®¬ë ˆì´ì…˜
                await new Promise(resolve => setTimeout(resolve, 500));
                
                // ìƒ˜í”Œ ë°ì´í„°ë¡œ ê³¼ì • ì •ë³´ í‘œì‹œ
                const sampleCourses = {
                    '1': {
                        id: 1,
                        title: 'JavaScript ê¸°ì´ˆ í”„ë¡œê·¸ë˜ë°',
                        description: 'JavaScriptì˜ ê¸°ë³¸ ë¬¸ë²•ë¶€í„° ê³ ê¸‰ ê¸°ëŠ¥ê¹Œì§€ ì²´ê³„ì ìœ¼ë¡œ í•™ìŠµí•©ë‹ˆë‹¤. ë³€ìˆ˜, í•¨ìˆ˜, ê°ì²´, ë°°ì—´ ë“±ì˜ ê¸°ë³¸ ê°œë…ì„ ìµíˆê³ , DOM ì¡°ì‘ê³¼ ì´ë²¤íŠ¸ ì²˜ë¦¬ë¥¼ í†µí•´ ì¸í„°ë™í‹°ë¸Œí•œ ì›¹ í˜ì´ì§€ë¥¼ ë§Œë“¤ ìˆ˜ ìˆìŠµë‹ˆë‹¤.',
                        instructorName: 'ê¹€ê°•ì‚¬',
                        level: 'ì´ˆê¸‰',
                        category: 'ì›¹ ê°œë°œ',
                        progress: 65,
                        studentCount: 127,
                        lectures: [
                            { id: 1, title: 'JavaScript ì†Œê°œ', type: 'video', duration: 30, status: 'completed' },
                            { id: 2, title: 'ë³€ìˆ˜ì™€ ë°ì´í„° íƒ€ì…', type: 'video', duration: 45, status: 'completed' },
                            { id: 3, title: 'í•¨ìˆ˜ì™€ ìŠ¤ì½”í”„', type: 'video', duration: 60, status: 'current' },
                            { id: 4, title: 'ê°ì²´ì™€ ë°°ì—´', type: 'video', duration: 50, status: 'locked' },
                            { id: 5, title: 'DOM ì¡°ì‘', type: 'video', duration: 75, status: 'locked' }
                        ]
                    },
                    '2': {
                        id: 2,
                        title: 'ì•Œê³ ë¦¬ì¦˜ê³¼ ìë£Œêµ¬ì¡°',
                        description: 'í”„ë¡œê·¸ë˜ë°ì˜ í•µì‹¬ì¸ ì•Œê³ ë¦¬ì¦˜ê³¼ ìë£Œêµ¬ì¡°ë¥¼ ì²´ê³„ì ìœ¼ë¡œ í•™ìŠµí•©ë‹ˆë‹¤.',
                        instructorName: 'ì´êµìˆ˜',
                        level: 'ì¤‘ê¸‰',
                        category: 'ì»´í“¨í„°ê³¼í•™',
                        progress: 30,
                        studentCount: 89,
                        lectures: []
                    },
                    '3': {
                        id: 3,
                        title: 'React ì›¹ ê°œë°œ',
                        description: 'Reactë¥¼ í™œìš©í•œ í˜„ëŒ€ì ì¸ ì›¹ ì• í”Œë¦¬ì¼€ì´ì…˜ ê°œë°œì„ í•™ìŠµí•©ë‹ˆë‹¤.',
                        instructorName: 'ë°•ê°œë°œ',
                        level: 'ê³ ê¸‰',
                        category: 'ì›¹ ê°œë°œ',
                        progress: 0,
                        studentCount: 56,
                        lectures: []
                    }
                };
                
                const course = sampleCourses[courseId];
                if (!course) {
                    showError('ì¡´ì¬í•˜ì§€ ì•ŠëŠ” ê³¼ì •ì…ë‹ˆë‹¤.');
                    return;
                }
                
                renderCourseDetail(course);
            }
        }
        
        // ê³¼ì • ìƒì„¸ ì •ë³´ ë Œë”ë§
        function renderCourseDetail(course) {
            // í—¤ë” ì •ë³´ ì—…ë°ì´íŠ¸
            document.getElementById('course-title').textContent = course.title;
            document.getElementById('course-breadcrumb').textContent = course.title;
            document.getElementById('instructor-name').textContent = course.instructorName;
            document.getElementById('course-level').textContent = course.level;
            document.getElementById('course-category').textContent = course.category;
            document.getElementById('student-count').textContent = course.studentCount;
            document.getElementById('progress-percent').textContent = course.progress + '%';
            document.getElementById('progress-fill').style.width = course.progress + '%';
            document.getElementById('course-description').textContent = course.description;
            
            // ë§í¬ ì—…ë°ì´íŠ¸
            document.getElementById('materials-link').href = `/course-materials.html?id=${course.id}`;
            document.getElementById('discussions-link').href = `/course-discussions.html?id=${course.id}`;
            
            // ê°•ì˜ ëª©ë¡ ë Œë”ë§
            renderLectures(course.lectures || []);
            
            // í†µê³„ ì—…ë°ì´íŠ¸
            const completedLectures = course.lectures ? course.lectures.filter(l => l.status === 'completed').length : 0;
            const totalLectures = course.lectures ? course.lectures.length : 0;
            
            document.getElementById('completed-lectures').textContent = completedLectures;
            document.getElementById('total-lectures').textContent = totalLectures;
            document.getElementById('study-time').textContent = '12ì‹œê°„';
            document.getElementById('assignments-completed').textContent = '3/5';
            
            // ê³¼ì œ ëª©ë¡ ë Œë”ë§
            renderAssignments();
        }
        
        // ê°•ì˜ ëª©ë¡ ë Œë”ë§
        function renderLectures(lectures) {
            const lectureList = document.getElementById('lecture-list');
            
            if (lectures.length === 0) {
                lectureList.innerHTML = '<p style="text-align: center; color: #718096; padding: 2rem;">ì•„ì§ ë“±ë¡ëœ ê°•ì˜ê°€ ì—†ìŠµë‹ˆë‹¤.</p>';
                return;
            }
            
            lectureList.innerHTML = lectures.map((lecture, index) => {
                const statusIcon = {
                    'completed': 'âœ…',
                    'current': 'â–¶ï¸',
                    'locked': 'ğŸ”’'
                }[lecture.status];
                
                const statusClass = `status-${lecture.status}`;
                
                return `
                    <div class="lecture-item" onclick="openLecture(${lecture.id}, '${lecture.status}')">
                        <div class="lecture-icon">
                            ${lecture.type === 'video' ? 'ğŸ¥' : 'ğŸ“„'}
                        </div>
                        <div class="lecture-content">
                            <div class="lecture-title">${lecture.title}</div>
                            <div class="lecture-meta">${lecture.duration}ë¶„ | ${lecture.type === 'video' ? 'ë™ì˜ìƒ' : 'ë¬¸ì„œ'}</div>
                        </div>
                        <div class="lecture-status ${statusClass}">
                            ${statusIcon}
                        </div>
                    </div>
                `;
            }).join('');
        }
        
        // ê³¼ì œ ëª©ë¡ ë Œë”ë§
        function renderAssignments() {
            const assignmentsList = document.getElementById('assignments-list');
            
            const sampleAssignments = [
                { id: 1, title: 'ê¸°ë³¸ ë¬¸ë²• í€´ì¦ˆ', type: 'quiz', status: 'completed', score: 85 },
                { id: 2, title: 'í•¨ìˆ˜ ì‹¤ìŠµ ê³¼ì œ', type: 'assignment', status: 'submitted', score: null },
                { id: 3, title: 'í”„ë¡œì íŠ¸ ê³¼ì œ', type: 'project', status: 'pending', score: null }
            ];
            
            assignmentsList.innerHTML = sampleAssignments.map(assignment => {
                const statusText = {
                    'completed': 'ì™„ë£Œ',
                    'submitted': 'ì œì¶œ ì™„ë£Œ',
                    'pending': 'ë¯¸ì œì¶œ'
                }[assignment.status];
                
                const statusColor = {
                    'completed': '#38a169',
                    'submitted': '#667eea',
                    'pending': '#e53e3e'
                }[assignment.status];
                
                return `
                    <div style="padding: 1rem; border: 1px solid #e2e8f0; border-radius: 8px; margin-bottom: 1rem; cursor: pointer;" onclick="openAssignment(${assignment.id})">
                        <div style="font-weight: 600; margin-bottom: 0.5rem;">${assignment.title}</div>
                        <div style="font-size: 0.9rem; color: ${statusColor};">
                            ${statusText} ${assignment.score ? `(${assignment.score}ì )` : ''}
                        </div>
                    </div>
                `;
            }).join('');
        }
        
        // ì˜¤ë¥˜ ë©”ì‹œì§€ í‘œì‹œ
        function showError(message) {
            document.getElementById('loading').style.display = 'none';
            document.getElementById('course-content').style.display = 'none';
            document.getElementById('error-message').style.display = 'block';
            document.getElementById('error-text').textContent = message;
        }
        
        // í•™ìŠµ ì‹œì‘
        function startLearning() {
            // ì²« ë²ˆì§¸ ë¯¸ì™„ë£Œ ê°•ì˜ë¡œ ì´ë™
            window.location.href = `/lecture.html?courseId=${courseId}&lectureId=3`;
        }
        
        // ê°•ì˜ ì—´ê¸°
        function openLecture(lectureId, status) {
            if (status === 'locked') {
                alert('ì´ì „ ê°•ì˜ë¥¼ ì™„ë£Œí•œ í›„ í•™ìŠµí•  ìˆ˜ ìˆìŠµë‹ˆë‹¤.');
                return;
            }
            window.location.href = `/lecture.html?courseId=${courseId}&lectureId=${lectureId}`;
        }
        
        // ê³¼ì œ ì—´ê¸°
        function openAssignment(assignmentId) {
            window.location.href = `/assignment.html?courseId=${courseId}&assignmentId=${assignmentId}`;
        }
        
        // ë¡œê·¸ì•„ì›ƒ
        function logout() {
            if (confirm('ë¡œê·¸ì•„ì›ƒ í•˜ì‹œê² ìŠµë‹ˆê¹Œ?')) {
                localStorage.removeItem('authToken');
                localStorage.removeItem('userInfo');
                window.location.href = '/';
            }
        }
    </script>
</body>
</html>